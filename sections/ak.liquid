{% schema %}
{
  "name": "New Bar",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#1f3330"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "announcement_item",
      "name": "Announcement Item",
      "settings": [
        {
          "type": "textarea",
          "id": "icon_svg",
          "label": "SVG Icon",
          "info": "Paste your SVG code here"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Free Domestic Shipping"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "New Bar",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="announcement-bar" style="background: {{ section.settings.background_color }}; color: {{ section.settings.text_color }};">
  <div class="announcement-swiper swiper">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        <div class="swiper-slide">
          <div class="announcement-item">
            {% if block.settings.icon_svg != blank %}
              <span class="icon">{{ block.settings.icon_svg }}</span>
            {% endif %}
            <span class="text">{{ block.settings.text }}</span>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
.announcement-bar {
  width: 100%;
  padding: 8px 15px;
  font-size: 14px;
}

.announcement-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
}

.announcement-item .icon svg {
  width: 18px;
  height: 18px;
  fill: currentColor; /* inherit text color */
}

.announcement-item .text {
  line-height: 1.2;
  white-space: nowrap;
}

.announcement-swiper {
  overflow: hidden;
}

.swiper-slide {
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    new Swiper(".announcement-swiper", {
      slidesPerView: 4,
      spaceBetween: 30,
      loop: true,
      autoplay: {
        delay: 2000,
        disableOnInteraction: false,
      },
      speed: 800,
    });
  });
</script>
